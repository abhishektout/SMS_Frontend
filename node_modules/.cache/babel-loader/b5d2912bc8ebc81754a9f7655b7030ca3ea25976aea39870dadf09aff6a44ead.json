{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/hp/Desktop/SMS/SMS_Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/hp/Desktop/SMS/SMS_Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/hp/Desktop/SMS/SMS_Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useState}from\"react\";import Navbaar from\"../Navbar/navbar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function FeesCOllection(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),studentId=_useState2[0],setStudentId=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),feeAmount=_useState4[0],setFeeAmount=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),transactionId=_useState6[0],setTransactionId=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),collageAccount=_useState8[0],setcollageAccount=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),accuntFeeData=_useState10[0],setAccountFeeData=_useState10[1];var validateStudentId=function validateStudentId(){var pattern=/^[A-Z]{2,4}\\d{6}$/;var isValid=pattern.test(studentId);return isValid;};var validateFeeAmount=function validateFeeAmount(){if(!feeAmount){alert(\"please enter fee amount\");return false;}else if(feeAmount!=accuntFeeData){alert(\"invalid ammount\");return false;}else if(feeAmount<0){alert(\"invalid ammount\");return false;}else{var feeAmountPattern=/^\\d+(\\.\\d{1,2})?$/;return feeAmount.match(feeAmountPattern)?true:false;}};var validateTransactionHistory=function validateTransactionHistory(){if(transactionId)return true;return false;};var verifyFromAccount=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"http://localhost:3000/accountInfo/verifyTransactionId\",{transactionId:transactionId});case 3:response=_context.sent;setAccountFeeData(response.data.fee);return _context.abrupt(\"return\",true);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);alert(\"error\");return _context.abrupt(\"return\",true);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function verifyFromAccount(){return _ref.apply(this,arguments);};}();var submitButton=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var verify,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:verify=verifyFromAccount();if(!verify){_context2.next=16;break;}if(!(validateStudentId()&&validateFeeAmount()&&validateTransactionHistory())){_context2.next=15;break;}_context2.prev=3;_context2.next=6;return axios.post(\"http://localhost:3000/student/fees\",{stdId:studentId,fee:feeAmount,transactionId:transactionId,paymentMode:\"online\"});case 6:response=_context2.sent;alert(\"all done\");_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](3);alert(\"error\");case 13:_context2.next=16;break;case 15:alert(\"something wrong\");case 16:case\"end\":return _context2.stop();}},_callee2,null,[[3,10]]);}));return function submitButton(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbaar,{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Throught Technology\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Fees Collection\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 text-end\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Student Id\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"input\",{onBlur:function onBlur(event){return setStudentId(event.target.value);},type:\"text\",placeholder:\"enter student id\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row m-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 text-end\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Transaction Id\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"input\",{onBlur:function onBlur(event){return setTransactionId(event.target.value);},type:\"text\",placeholder:\"enter Transaction Id\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row m-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 text-end\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Fee Amount\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"input\",{onBlur:function onBlur(event){return setFeeAmount(event.target.value);},type:\"text\",placeholder:\"enter fee amount\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return submitButton();},children:\"Submit\"})})]})]});}","map":{"version":3,"names":["axios","useState","Navbaar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FeesCOllection","_useState","_useState2","_slicedToArray","studentId","setStudentId","_useState3","_useState4","feeAmount","setFeeAmount","_useState5","_useState6","transactionId","setTransactionId","_useState7","_useState8","collageAccount","setcollageAccount","_useState9","_useState10","accuntFeeData","setAccountFeeData","validateStudentId","pattern","isValid","test","validateFeeAmount","alert","feeAmountPattern","match","validateTransactionHistory","verifyFromAccount","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","post","sent","data","fee","abrupt","t0","stop","apply","arguments","submitButton","_ref2","_callee2","verify","_callee2$","_context2","stdId","paymentMode","children","className","onBlur","event","target","value","type","placeholder","onClick"],"sources":["C:/Users/hp/Desktop/SMS/SMS_Frontend/src/FeesCollect/fees_collect.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useState } from \"react\"\r\nimport Navbaar from \"../Navbar/navbar\";\r\n\r\nexport default function FeesCOllection() {\r\n    const [studentId, setStudentId] = useState(\"\");\r\n    const [feeAmount, setFeeAmount] = useState(0);\r\n    const [transactionId, setTransactionId] = useState(\"\");\r\n    const [collageAccount, setcollageAccount] = useState(false)\r\n    const [accuntFeeData, setAccountFeeData] = useState(0);\r\n\r\n    const validateStudentId = () => {\r\n        const pattern = /^[A-Z]{2,4}\\d{6}$/;\r\n        const isValid = pattern.test(studentId);\r\n        return isValid;\r\n    }\r\n    const validateFeeAmount = () => {\r\n        if (!feeAmount) {\r\n            alert(\"please enter fee amount\")\r\n            return false;\r\n        }\r\n        else if (feeAmount != accuntFeeData) {\r\n            alert(\"invalid ammount\")\r\n            return false;\r\n        }\r\n        else if (feeAmount < 0) {\r\n            alert(\"invalid ammount\")\r\n            return false;\r\n        }\r\n        else {\r\n            const feeAmountPattern = /^\\d+(\\.\\d{1,2})?$/;\r\n            return feeAmount.match(feeAmountPattern) ? true : false;\r\n        }\r\n    }\r\n    const validateTransactionHistory = () => {\r\n        if (transactionId)\r\n            return true;\r\n        return false;\r\n    }\r\n    const verifyFromAccount = async () => {\r\n        try {\r\n            const response = await axios.post(\"http://localhost:3000/accountInfo/verifyTransactionId\", { transactionId: transactionId })\r\n            setAccountFeeData(response.data.fee)\r\n            return true;\r\n        } catch (err) {\r\n            alert(\"error\")\r\n            return true;\r\n        }\r\n    }\r\n    const submitButton = async () => {\r\n        const verify = verifyFromAccount();\r\n        if (verify)\r\n            if (validateStudentId() && validateFeeAmount() && validateTransactionHistory()) {\r\n                try {\r\n                    const response = await axios.post(\"http://localhost:3000/student/fees\", { stdId: studentId, fee: feeAmount, transactionId: transactionId, paymentMode: \"online\" })\r\n                    alert(\"all done\")\r\n                } catch (err) {\r\n                    alert(\"error\")\r\n                }\r\n            }\r\n            else\r\n                alert(\"something wrong\")\r\n    }\r\n    return <>\r\n        <Navbaar />\r\n        <div>\r\n            <div>\r\n                <h1 className=\"text-center\">Throught Technology</h1>\r\n\r\n                <h1 className=\"text-center\">Fees Collection</h1>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 text-end\">\r\n                    <label>Student Id</label>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                    <input onBlur={(event) => setStudentId(event.target.value)} type=\"text\" placeholder=\"enter student id\" />\r\n                </div>\r\n            </div>\r\n            <div className=\"row m-2\">\r\n                <div className=\"col-md-6 text-end\">\r\n                    <label>Transaction Id</label>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                    <input onBlur={(event) => setTransactionId(event.target.value)} type=\"text\" placeholder=\"enter Transaction Id\" />\r\n                </div>\r\n            </div>\r\n            <div className=\"row m-2\">\r\n                <div className=\"col-md-6 text-end\">\r\n                    <label>Fee Amount</label>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                    <input onBlur={(event) => setFeeAmount(event.target.value)} type=\"text\" placeholder=\"enter fee amount\" />\r\n                </div>\r\n            </div>\r\n            <div className=\"text-center mt-4\">\r\n                <button onClick={() => submitButton()}>Submit</button>\r\n            </div>\r\n        </div>\r\n    </>\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}